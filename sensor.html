
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>sensor module &#8212; CATS  documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CATS  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-sensor">
<span id="sensor-module"></span><h1>sensor module<a class="headerlink" href="#module-sensor" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="sensor.BasicVisual">
<em class="property">class </em><code class="descclassname">sensor.</code><code class="descname">BasicVisual</code><a class="headerlink" href="#sensor.BasicVisual" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Simulates the capability of a human visual system.</p>
<dl class="staticmethod">
<dt id="sensor.BasicVisual.get_intersection_traffic">
<em class="property">static </em><code class="descname">get_intersection_traffic</code><span class="sig-paren">(</span><em>car</em>, <em>tg</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.BasicVisual.get_intersection_traffic" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to ‘peep and look’ at turnings. Essentially used only in right of way rules to see if there is a car coming into the intersection from another road. Refer to the implementation docs for details on how this function works, and what the dict keys mean.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>car</strong> (<em>object</em>) – vehicle object</li>
<li><strong>tg</strong> (<em>object</em>) – Traffic Graph object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">with keys as [1,3,5,7] and values as list of vehicle objects</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Currently this seems to be used at all time instants so often returns dict with keys from [1,8] or [0,7] which is probably when it is called when on turn roads. Don’t panic!!</p>
</dd></dl>

<dl class="staticmethod">
<dt id="sensor.BasicVisual.get_traffic_signal_state">
<em class="property">static </em><code class="descname">get_traffic_signal_state</code><span class="sig-paren">(</span><em>car</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.BasicVisual.get_traffic_signal_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows the traffic signals that are visible to a human driver.</p>
<p>Currently included in BasicVisual as driver can ‘see’ the traffic signal. Later should be included in communication module.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>car</strong> (<em>object</em>) – vehicle object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">[color, time remaining] , if there is no signal, returns [None, None]</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="sensor.BasicVisual.get_visible_cars">
<em class="property">static </em><code class="descname">get_visible_cars</code><span class="sig-paren">(</span><em>car</em>, <em>tg</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.BasicVisual.get_visible_cars" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows cars that are visible to a human driver. Similar to what a driver can see (directly or via the mirrors, side or rear).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>car</strong> (<em>object</em>) – Vehicle object</li>
<li><strong>tg</strong> (<em>object</em>) – Traffic Graph object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">with keys as [‘front’, ‘back’, ‘left’, ‘right’] and values as a list of vehicle objects</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
<p>Future: instead of passing a car, pass only the attributes as a message or via a bus</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sensor.GPS">
<em class="property">class </em><code class="descclassname">sensor.</code><code class="descname">GPS</code><a class="headerlink" href="#sensor.GPS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Simulates a GPS device.</p>
<dl class="staticmethod">
<dt id="sensor.GPS.get_position">
<em class="property">static </em><code class="descname">get_position</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.GPS.get_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows the GPS coordinates of vehicle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>float</em>) – x coordinate of vehicle</li>
<li><strong>y</strong> (<em>float</em>) – y coordinate of vehicle</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">[x, y] of the vehicle</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sensor.LaneCenterSensor">
<em class="property">class </em><code class="descclassname">sensor.</code><code class="descname">LaneCenterSensor</code><a class="headerlink" href="#sensor.LaneCenterSensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Simulates a sensor that gives offset from the lane center.</p>
<p>Future: Implementation might have to change for curved roads/roadstring ds.</p>
<dl class="staticmethod">
<dt id="sensor.LaneCenterSensor.get_lane_center_dtheta">
<em class="property">static </em><code class="descname">get_lane_center_dtheta</code><span class="sig-paren">(</span><em>car</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.LaneCenterSensor.get_lane_center_dtheta" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes in the car object and returns the difference between the heading of the road/lane and the heading of the vehicle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>car</strong> (<em>object</em>) – vehicle object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">angle in radians</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="sensor.LaneCenterSensor.get_lane_center_dy">
<em class="property">static </em><code class="descname">get_lane_center_dy</code><span class="sig-paren">(</span><em>car</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.LaneCenterSensor.get_lane_center_dy" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes in car object and returns the displacement from the lane center.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>car</strong> (<em>object</em>) – vehicle object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">distance from center of lane</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Calculates distance from left edge of road and subtracts lane number * lane width.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="sensor.LaneCenterSensor.offset_direction">
<em class="property">static </em><code class="descname">offset_direction</code><span class="sig-paren">(</span><em>car</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.LaneCenterSensor.offset_direction" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated. When lane center was calculated using distance from center of road, this method was used to check if the car is to the left of the road center or to the right.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>car</strong> (<em>object</em>) – car</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">0 or 1 or -1</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Not using this currently.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sensor.PositionBasedVelocityEstimator">
<em class="property">class </em><code class="descclassname">sensor.</code><code class="descname">PositionBasedVelocityEstimator</code><a class="headerlink" href="#sensor.PositionBasedVelocityEstimator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Estimates the vehicle speed based on its position.</p>
<p class="rubric">Notes</p>
<p>Not implemented currently. returning the speed directly.</p>
<p>Future: implement a fusion of speed sensor and position based velocity estimator.</p>
<dl class="staticmethod">
<dt id="sensor.PositionBasedVelocityEstimator.calc_speed">
<em class="property">static </em><code class="descname">calc_speed</code><span class="sig-paren">(</span><em>car</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.PositionBasedVelocityEstimator.calc_speed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="sensor.PositionBasedVelocityEstimator.read_speed">
<em class="property">static </em><code class="descname">read_speed</code><span class="sig-paren">(</span><em>speed</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.PositionBasedVelocityEstimator.read_speed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="sensor.VehicleSpeedSensor">
<em class="property">class </em><code class="descclassname">sensor.</code><code class="descname">VehicleSpeedSensor</code><span class="sig-paren">(</span><em>car=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.VehicleSpeedSensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Simulates a speed sensor.</p>
<dl class="attribute">
<dt id="sensor.VehicleSpeedSensor.car">
<code class="descname">car</code><a class="headerlink" href="#sensor.VehicleSpeedSensor.car" title="Permalink to this definition">¶</a></dt>
<dd><p><em>object</em> – Vehicle object</p>
</dd></dl>

<p>Todo: Implement noisy version of speed.</p>
<p>Future: Implement sensor fusion using GPS data.</p>
<dl class="method">
<dt id="sensor.VehicleSpeedSensor.read_speed">
<code class="descname">read_speed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sensor.VehicleSpeedSensor.read_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows the speed of vehicle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">speed</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="sensor.get_adj_polygon_from_point">
<code class="descclassname">sensor.</code><code class="descname">get_adj_polygon_from_point</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>theta</em>, <em>width</em>, <em>distance</em>, <em>direction</em>, <em>lane_width</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.get_adj_polygon_from_point" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a polygon with lane_width away from (x, y) along theta angle in given direction with sizes distance x width.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>float</em>) – x coordinate</li>
<li><strong>y</strong> (<em>float</em>) – y coordinate</li>
<li><strong>theta</strong> (<em>float</em>) – angle in radians</li>
<li><strong>width</strong> (<em>float</em>) – width of the bounding box</li>
<li><strong>distance</strong> (<em>float</em>) – length of the bounding box</li>
<li><strong>direction</strong> (<em>str</em>) – ‘left’ or ‘right’</li>
<li><strong>lane_width</strong> (<em>float</em>) – to check lane_width distance away = finding in the adjacent lane</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">shapely Polygon object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sensor.get_car_bounding_box">
<code class="descclassname">sensor.</code><code class="descname">get_car_bounding_box</code><span class="sig-paren">(</span><em>car</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.get_car_bounding_box" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the bounding box (not axis aligned; generic one) of the vehicle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>car</strong> (<em>object</em>) – vehicle object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">shapely Polygon object</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sensor.get_car_bounding_box_adj">
<code class="descclassname">sensor.</code><code class="descname">get_car_bounding_box_adj</code><span class="sig-paren">(</span><em>car</em>, <em>lane_width</em>, <em>direction</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.get_car_bounding_box_adj" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a bounding box of the area in the adjacent lane of the vehicle determined by the input args.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>car</strong> (<em>object</em>) – vehicle object</li>
<li><strong>lane_width</strong> (<em>float</em>) – </li>
<li><strong>direction</strong> (<em>str</em>) – ‘left’ or ‘right’</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">shapely Polygon object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sensor.get_car_bounding_box_back">
<code class="descclassname">sensor.</code><code class="descname">get_car_bounding_box_back</code><span class="sig-paren">(</span><em>car</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.get_car_bounding_box_back" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the bounding box (not axis aligned; generic one) of the area in the back vehicle (determined by safe dist).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>car</strong> (<em>object</em>) – vehicle object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">shapely Polygon object</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sensor.get_car_bounding_box_front">
<code class="descclassname">sensor.</code><code class="descname">get_car_bounding_box_front</code><span class="sig-paren">(</span><em>car</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.get_car_bounding_box_front" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the bounding box (not axis aligned; generic one) of the area in the front vehicle (determined by safe dist).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>car</strong> (<em>object</em>) – vehicle object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">shapely Polygon object</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sensor.get_polygon_from_point">
<code class="descclassname">sensor.</code><code class="descname">get_polygon_from_point</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>theta</em>, <em>width</em>, <em>front_distance</em>, <em>back_distance</em><span class="sig-paren">)</span><a class="headerlink" href="#sensor.get_polygon_from_point" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a polygon around a point in a given heading angle with given dimensions. Front_distance and back_distance are determined by the heading angle to figure out which one is front or back.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>float</em>) – x coordinate</li>
<li><strong>y</strong> (<em>float</em>) – y coordinate</li>
<li><strong>theta</strong> (<em>float</em>) – heading angle in radians</li>
<li><strong>width</strong> (<em>float</em>) – width of the bounding box</li>
<li><strong>front_distance</strong> (<em>float</em>) – distance from the point to the end of the front of the box (ahead of the point)</li>
<li><strong>back_distance</strong> (<em>float</em>) – distance from the point to the end of the back of the box (behind the point)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">shapely Polygon object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/sensor.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CATS  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Ohio State University.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>